<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Chat</title>
    <style>
      /* #chats {
          border: 2px solid red;
          width: 50%;
          height: 10%;
          overflow: scroll;
      } */
    </style>

    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore-compat.js"></script>

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=delete"
    />
  </head>

  <body>
    <!-- <div id="message">
    <p id="msg"></p>
</div> -->

    <div id="chats"></div>

    <label for="user-name">Name</label
    ><input
      type="text"
      name="user-name"
      id="user-name"
      value=""
      placeholder="Name"
    />
    <label for="user-text">Message</label
    ><input
      type="text"
      name="user-text"
      id="user-text"
      value=""
      placeholder="message"
    />
    <button id="btn">send</button>

    <script type="module">
      import { firebaseConfig } from "./config.js";
      import { addMsg } from "./addFunction.js";
      import { deleteMsg } from "./deleteFunction.js";
      import { getMsg } from "./getFunction.js";
      import { updateMsg } from "./updatefunction.js";

      firebase.initializeApp(firebaseConfig);

      let btn = document.getElementById("btn");
      let para = document.getElementById("msg");

      // adding message
      btn.addEventListener("click", () => {
        console.log("clicked");

        let name = document.getElementById("user-name").value || "Guest";
        let text = document.getElementById("user-text").value;

        console.log("current id ", docId);

        if (docId) {
          updateMsg(docId, name, text);
        } else {
          addMsg(name, text);
        }

        document.getElementById("user-name").value = "";
        document.getElementById("user-text").value = "";
      });

      getMsg();

      functionObject.one();
    </script>
  </body>
</html>
